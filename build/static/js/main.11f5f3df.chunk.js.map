{"version":3,"sources":["components/test.less","components/Takephoto.js","App.js","index.js"],"names":["module","exports","mediaStreamTrack","Audio","props","readyVideo","e","setState","showMod","isShot","myVideo","document","getElementById","videoObj","navigator","getMedia","getUserMedia","webkitGetUserMedia","mozGetUserMeddia","msGetUserMedia","mediaDevices","then","stream","stop","getTracks","srcObject","play","catch","err","console","log","shot","getContext","drawImage","sureShot","that","img","toDataURL","cancel","state","this","className","onClick","id","width","height","style","src","Component","App","path","component","Sql","ReactDom","render"],"mappings":"8HAAAA,EAAOC,QAAU,IAA0B,mC,gECEvCC,E,sGAEiBC,G,kBACnB,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAURC,WAAa,SAACC,GACJ,eACHC,SAAS,CACZC,SAAS,EACTC,QAAQ,IACP,WACD,IAAIC,EAAUC,SAASC,eAAe,WAElCC,GADWF,SAASC,eAAe,YAC3B,aACV,OAAS,EACT,OAAS,GAFC,QAGH,KAKTE,UAAUC,SAAWD,UAAUE,cAAgBF,UAAUG,oBAAsBH,UAAUI,kBAAoBJ,UAAUK,eACnHL,UAAUM,cAAgBN,UAAUM,aAAaJ,aACnDF,UAAUM,aAAaJ,aAAaH,GAAUQ,MAAK,SAAUC,GAC3DpB,EAA0C,oBAAhBoB,EAAOC,KAAsBD,EAASA,EAAOE,YAAY,GACnFd,EAAQe,UAAYH,EACpBZ,EAAQgB,UACPC,OAAM,SAAUC,GACjBC,QAAQC,IAAIF,MAIPd,UAAUC,UACjBD,UAAUC,SAASF,GAAU,SAAUS,GACrCpB,EAAmBoB,EAAOE,YAAY,GACtCd,EAAQe,UAAYH,EACpBZ,EAAQgB,UACP,SAAUE,GACXC,QAAQC,IAAIF,UA5CD,EAkDnBG,KAAO,WACL,IAAIrB,EAAUC,SAASC,eAAe,WACvBD,SAASC,eAAe,YAAYoB,WAAW,MACrDC,UAAUvB,EAAS,EAAG,EAAG,IAAK,KACvC,EAAKH,SAAS,CACZE,QAAQ,KAvDO,EA2DlByB,SAAW,WACV,IAAIC,EAAK,eAELC,EADWzB,SAASC,eAAe,YACpByB,UAAU,aAC7BF,EAAK5B,SAAS,CACZ6B,QAEFD,EAAKG,UAlEY,EAqEnBA,OAAS,WAEO3B,SAASC,eAAe,YACvBV,GAAoBA,EAAiBqB,OACpD,EAAKhB,SAAS,CACZE,QAAQ,EACRD,SAAS,KAzEX,EAAK+B,MAAQ,CACX9B,QAAQ,EACRD,SAAS,EACT4B,IAAI,IALW,E,mHA8ET,IAAD,EACuBI,KAAKD,MAA7B9B,EADC,EACDA,OAAQD,EADP,EACOA,QAAS4B,EADhB,EACgBA,IACvB,OACE,yBAAKK,UAAU,cACb,4BAAQC,QAASF,KAAKnC,YAAtB,gBACCG,EACC,yBAAKiC,UAAU,eACb,yBAAKA,UAAU,aACb,2BAAOE,GAAG,UAAUC,MAAM,MAAMC,OAAO,QACvC,4BAAQF,GAAG,WAAWC,MAAM,MAAMC,OAAO,MACnCC,MAAO,CAACF,MAAM,QAAQC,OAAO,YAGrC,4BAAQH,QAASF,KAAKT,MAAOtB,EAAO,eAAK,gBACxCA,EAAQ,4BAAQiC,QAASF,KAAKN,UAAtB,gBAA6C,KACtD,4BAAQQ,QAASF,KAAKF,QAAtB,iBAEF,KACDF,EAAM,yBAAKW,IAAKX,IAAS,U,GAjGCY,cCAdC,E,iLAEb,OACI,6BACI,kBAAC,IAAD,KACI,6BACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,IAAIC,UAAWC,Y,GAPtBJ,a,YCGjCK,IAASC,OACL,kBAAC,EAAD,MACA3C,SAASC,eAAe,W","file":"static/js/main.11f5f3df.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/test.9d229d34.less\";","import React, { Component } from 'react';\r\nimport \"./test.less\";\r\nvar mediaStreamTrack; //拍照\r\n\r\nexport default class Audio extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isShot: false,//是否点击弹框拍摄按钮\r\n      showMod: false,\r\n      img:'', //拍摄的照片\r\n    }\r\n  }\r\n  componentDidMount() {\r\n  }\r\n  //点击页面拍照按钮\r\n  readyVideo = (e) => {\r\n    var that = this;\r\n    that.setState({\r\n      showMod: true,\r\n      isShot: false,\r\n    }, () => {\r\n      var myVideo = document.getElementById('myVideo');\r\n      var myCanvas = document.getElementById('myCanvas');\r\n      let videoObj = {\r\n        'audio': false,\r\n        'video': true,\r\n        video: {\r\n          // width: { min: 1024, ideal: 4000, max: 2048 },\r\n          // height: { min: 768, ideal: 1200, max: 1536 }\r\n        }\r\n      }\r\n      navigator.getMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMeddia || navigator.msGetUserMedia;\r\n      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        navigator.mediaDevices.getUserMedia(videoObj).then(function (stream) {\r\n          mediaStreamTrack = typeof stream.stop === 'function' ? stream : stream.getTracks()[0];\r\n          myVideo.srcObject = stream;\r\n          myVideo.play();\r\n        }).catch(function (err) {\r\n          console.log(err);\r\n        })\r\n      }\r\n      // 使用旧方法打开摄像头\r\n      else if (navigator.getMedia) {\r\n        navigator.getMedia(videoObj, function (stream) {\r\n          mediaStreamTrack = stream.getTracks()[0];\r\n          myVideo.srcObject = stream;\r\n          myVideo.play();\r\n        }, function (err) {\r\n          console.log(err);\r\n        });\r\n      }\r\n    })\r\n  }\r\n  //弹框拍摄\r\n  shot = () => {\r\n    var myVideo = document.getElementById('myVideo');\r\n    var myCanvas = document.getElementById('myCanvas').getContext('2d');\r\n    myCanvas.drawImage(myVideo, 0, 0, 600, 600);\r\n    this.setState({\r\n      isShot: true,\r\n    })\r\n  }\r\n   // 确认此次拍摄照片\r\n   sureShot = () => {\r\n    let that=this;\r\n    var myCanvas = document.getElementById('myCanvas');\r\n    var img = myCanvas.toDataURL(\"image/png\");\r\n    that.setState({\r\n      img\r\n    });\r\n    that.cancel();\r\n  }\r\n  //取消\r\n  cancel = () => {\r\n    //关闭摄像头\r\n    var myVideo = document.getElementById('myVideo');\r\n    if (myVideo) { mediaStreamTrack && mediaStreamTrack.stop(); }\r\n    this.setState({\r\n      isShot: false,\r\n      showMod: false,\r\n    })\r\n  }\r\n  render() {\r\n    let { isShot, showMod ,img} = this.state;\r\n    return (\r\n      <div className='video_page'>\r\n        <button onClick={this.readyVideo}>拍照</button>\r\n        {showMod \r\n        ?(<div className='video_model'>\r\n            <div className='video_box'>\r\n              <video id='myVideo' width='300' height='300'></video>\r\n              <canvas id='myCanvas' width='600' height=\"600\" \r\n                    style={{width:'300px',height:'300px'}}\r\n              ></canvas>\r\n            </div>\r\n            <button onClick={this.shot}>{isShot?'重拍':'拍照'}</button>\r\n            {isShot?(<button onClick={this.sureShot}>确认</button>):null}\r\n            <button onClick={this.cancel}>取消</button>\r\n          </div>)\r\n        : null}\r\n        {img ? <img src={img} />: null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React,{Component} from 'react';\r\nimport {HashRouter as Router,Route,Switch} from 'react-router-dom';\r\nimport Sql from './components/Takephoto';\r\n\r\nexport default class App extends Component{\r\n    render(){\r\n        return (\r\n            <div>\r\n                <Router>\r\n                    <div>\r\n                        <Switch>\r\n                            <Route path='/' component={Sql} />\r\n                        </Switch>\r\n\r\n                    </div>\r\n                </Router>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport 'antd-mobile/dist/antd-mobile.css';\r\n\r\n\r\nReactDom.render(\r\n    <App/>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}